webpackJsonp([22],{1175:function(t,n,i){"use strict";function e(t){i(1579)}Object.defineProperty(n,"__esModule",{value:!0});var o=(i(1432),i(1478)),s=i(1627),a=i(1),r=e,h=a(o.a,s.a,!1,r,null,null);n.default=h.exports},1407:function(t,n,i){"use strict";i.d(n,"a",function(){return PinchZoom});var e=i(332),o=i.n(e),s=i(100),a=i.n(s);(function(){"function"!=typeof a.a&&Object.defineProperty(Object,"assign",{value:function(t,n){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var i=Object(t),e=1;e<arguments.length;e++){var o=arguments[e];if(null!=o)for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}return i},writable:!0,configurable:!0}),"function"!=typeof o.a&&(Array.from=function(t){return[].slice.call(t)});var t=function(t){var n=document.implementation.createHTMLDocument("");return n.body.innerHTML=t,o()(n.body.children)[0]},n=function(t,n){var i=document.createEvent("HTMLEvents");i.initEvent(n,!0,!1),t.dispatchEvent(i)},e=function(){var i=function(t,n){this.el=t,this.zoomFactor=1,this.lastScale=1,this.offset={x:0,y:0},this.options=a()({},this.defaults,n),this.setupMarkup(),this.bindEvents(),this.update(),this.enable()},e=function(t,n){return t+n},s=function(t,n){return t>n-.01&&t<n+.01};i.prototype={defaults:{tapZoomFactor:2,zoomOutFactor:1.3,animationDuration:300,maxZoom:4,minZoom:.5,lockDragAxis:!1,use2d:!0,zoomStartEventName:"pz_zoomstart",zoomEndEventName:"pz_zoomend",dragStartEventName:"pz_dragstart",dragEndEventName:"pz_dragend",doubleTapEventName:"pz_doubletap"},handleDragStart:function(t){n(this.el,this.options.dragStartEventName),this.stopAnimation(),this.lastDragPosition=!1,this.hasInteraction=!0,this.handleDrag(t)},handleDrag:function(t){if(this.zoomFactor>1){var n=this.getTouches(t)[0];this.drag(n,this.lastDragPosition),this.offset=this.sanitizeOffset(this.offset),this.lastDragPosition=n}},handleDragEnd:function(){n(this.el,this.options.dragEndEventName),this.end()},handleZoomStart:function(t){n(this.el,this.options.zoomStartEventName),this.stopAnimation(),this.lastScale=1,this.nthZoom=0,this.lastZoomCenter=!1,this.hasInteraction=!0},handleZoom:function(t,n){var i=this.getTouchCenter(this.getTouches(t)),e=n/this.lastScale;this.lastScale=n,this.nthZoom+=1,this.nthZoom>3&&(this.scale(e,i),this.drag(i,this.lastZoomCenter)),this.lastZoomCenter=i},handleZoomEnd:function(){n(this.el,this.options.zoomEndEventName),this.end()},handleDoubleTap:function(t){var i=this.getTouches(t)[0],e=this.zoomFactor>1?1:this.options.tapZoomFactor,o=this.zoomFactor,s=function(t){this.scaleTo(o+t*(e-o),i)}.bind(this);this.hasInteraction||(o>e&&(i=this.getCurrentZoomCenter()),this.animate(this.options.animationDuration,s,this.swing),n(this.el,this.options.doubleTapEventName))},sanitizeOffset:function(t){var n=(this.zoomFactor-1)*this.getContainerX(),i=(this.zoomFactor-1)*this.getContainerY(),e=Math.max(n,0),o=Math.max(i,0),s=Math.min(n,0),a=Math.min(i,0);return{x:Math.min(Math.max(t.x,s),e),y:Math.min(Math.max(t.y,a),o)}},scaleTo:function(t,n){this.scale(t/this.zoomFactor,n)},scale:function(t,n){t=this.scaleZoomFactor(t),this.addOffset({x:(t-1)*(n.x+this.offset.x),y:(t-1)*(n.y+this.offset.y)})},scaleZoomFactor:function(t){var n=this.zoomFactor;return this.zoomFactor*=t,this.zoomFactor=Math.min(this.options.maxZoom,Math.max(this.zoomFactor,this.options.minZoom)),this.zoomFactor/n},drag:function(t,n){n&&(this.options.lockDragAxis?Math.abs(t.x-n.x)>Math.abs(t.y-n.y)?this.addOffset({x:-(t.x-n.x),y:0}):this.addOffset({y:-(t.y-n.y),x:0}):this.addOffset({y:-(t.y-n.y),x:-(t.x-n.x)}))},getTouchCenter:function(t){return this.getVectorAvg(t)},getVectorAvg:function(t){return{x:t.map(function(t){return t.x}).reduce(e)/t.length,y:t.map(function(t){return t.y}).reduce(e)/t.length}},addOffset:function(t){this.offset={x:this.offset.x+t.x,y:this.offset.y+t.y}},sanitize:function(){this.zoomFactor<this.options.zoomOutFactor?this.zoomOutAnimation():this.isInsaneOffset(this.offset)&&this.sanitizeOffsetAnimation()},isInsaneOffset:function(t){var n=this.sanitizeOffset(t);return n.x!==t.x||n.y!==t.y},sanitizeOffsetAnimation:function(){var t=this.sanitizeOffset(this.offset),n={x:this.offset.x,y:this.offset.y},i=function(i){this.offset.x=n.x+i*(t.x-n.x),this.offset.y=n.y+i*(t.y-n.y),this.update()}.bind(this);this.animate(this.options.animationDuration,i,this.swing)},zoomOutAnimation:function(){var t=this.zoomFactor,n=this.getCurrentZoomCenter(),i=function(i){this.scaleTo(t+i*(1-t),n)}.bind(this);this.animate(this.options.animationDuration,i,this.swing)},updateAspectRatio:function(){this.setContainerY(this.getContainerX()/this.getAspectRatio())},getInitialZoomFactor:function(){return this.container.offsetWidth/this.el.offsetWidth},getAspectRatio:function(){return this.el.offsetWidth/this.el.offsetHeight},getCurrentZoomCenter:function(){var t=this.container.offsetWidth*this.zoomFactor,n=this.offset.x,i=t-n-this.container.offsetWidth,e=n/i,o=e*this.container.offsetWidth/(e+1),s=this.container.offsetHeight*this.zoomFactor,a=this.offset.y,r=s-a-this.container.offsetHeight,h=a/r,c=h*this.container.offsetHeight/(h+1);return 0===i&&(o=this.container.offsetWidth),0===r&&(c=this.container.offsetHeight),{x:o,y:c}},canDrag:function(){return!s(this.zoomFactor,1)},getTouches:function(t){var n=this.container.getBoundingClientRect(),i=n.top+document.body.scrollTop,e=n.left+document.body.scrollLeft;return Array.prototype.slice.call(t.touches).map(function(t){return{x:t.pageX-e,y:t.pageY-i}})},animate:function(t,n,i,e){var o=(new Date).getTime(),s=function(){if(this.inAnimation){var a=(new Date).getTime()-o,r=a/t;a>=t?(n(1),e&&e(),this.update(),this.stopAnimation(),this.update()):(i&&(r=i(r)),n(r),this.update(),requestAnimationFrame(s))}}.bind(this);this.inAnimation=!0,requestAnimationFrame(s)},stopAnimation:function(){this.inAnimation=!1},swing:function(t){return-Math.cos(t*Math.PI)/2+.5},getContainerX:function(){return this.container.offsetWidth},getContainerY:function(){return this.container.offsetHeight},setContainerY:function(t){return this.container.style.height=t+"px"},setupMarkup:function(){this.container=t('<div class="pinch-zoom-container"></div>'),this.el.parentNode.insertBefore(this.container,this.el),this.container.appendChild(this.el),this.container.style.overflow="hidden",this.container.style.position="relative",this.el.style.webkitTransformOrigin="0% 0%",this.el.style.mozTransformOrigin="0% 0%",this.el.style.msTransformOrigin="0% 0%",this.el.style.oTransformOrigin="0% 0%",this.el.style.transformOrigin="0% 0%",this.el.style.position="absolute"},end:function(){this.hasInteraction=!1,this.sanitize(),this.update()},bindEvents:function(){var t=this;r(this.container,this),window.addEventListener("resize",this.update.bind(this)),o()(this.el.querySelectorAll("img")).forEach(function(n){n.addEventListener("load",t.update.bind(t))}),"IMG"===this.el.nodeName&&this.el.addEventListener("load",this.update.bind(this))},update:function(){this.updatePlaned||(this.updatePlaned=!0,setTimeout(function(){this.updatePlaned=!1,this.updateAspectRatio();var t=this.getInitialZoomFactor()*this.zoomFactor,n=-this.offset.x/t,i=-this.offset.y/t,e="scale3d("+t+", "+t+",1) translate3d("+n+"px,"+i+"px,0px)",o="scale("+t+", "+t+") translate("+n+"px,"+i+"px)",s=function(){this.clone&&(this.clone.parentNode.removeChild(this.clone),delete this.clone)}.bind(this);!this.options.use2d||this.hasInteraction||this.inAnimation?(this.is3d=!0,s(),this.el.style.webkitTransform=e,this.el.style.mozTransform=o,this.el.style.msTransform=o,this.el.style.oTransform=o,this.el.style.transform=e):(this.is3d&&(this.clone=this.el.cloneNode(!0),this.clone.style.pointerEvents="none",this.container.appendChild(this.clone),setTimeout(s,200)),this.el.style.webkitTransform=o,this.el.style.mozTransform=o,this.el.style.msTransform=o,this.el.style.oTransform=o,this.el.style.transform=o,this.is3d=!1)}.bind(this),0))},enable:function(){this.enabled=!0},disable:function(){this.enabled=!1}};var r=function(t,n){var i=null,e=0,s=null,a=null,r=function(t,e){if(i!==t){if(i&&!t)switch(i){case"zoom":n.handleZoomEnd(e);break;case"drag":n.handleDragEnd(e)}switch(t){case"zoom":n.handleZoomStart(e);break;case"drag":n.handleDragStart(e)}}i=t},h=function(t){2===e?r("zoom"):1===e&&n.canDrag()?r("drag",t):r(null,t)},c=function(t){return o()(t).map(function(t){return{x:t.pageX,y:t.pageY}})},f=function(t,n){var i,e;return i=t.x-n.x,e=t.y-n.y,Math.sqrt(i*i+e*e)},l=function(t,n){var i=f(t[0],t[1]);return f(n[0],n[1])/i},u=function(t){t.stopPropagation(),t.preventDefault()},d=function(t){var o=(new Date).getTime();if(e>1&&(s=null),o-s<300)switch(u(t),n.handleDoubleTap(t),i){case"zoom":n.handleZoomEnd(t);break;case"drag":n.handleDragEnd(t)}1===e&&(s=o)},m=!0;t.addEventListener("touchstart",function(t){n.enabled&&(m=!0,e=t.touches.length,d(t))}),t.addEventListener("touchmove",function(t){if(n.enabled){if(m)h(t),i&&u(t),a=c(t.touches);else{switch(i){case"zoom":n.handleZoom(t,l(a,c(t.touches)));break;case"drag":n.handleDrag(t)}i&&(u(t),n.update())}m=!1}}),t.addEventListener("touchend",function(t){n.enabled&&(e=t.touches.length,h(t))})};return i};"undefined"!=typeof define&&i(1662)?define(function(){return e()}):window.PinchZoom=e()}).call(this)},1432:function(t,n,i){"use strict";i(1407)},1478:function(t,n,i){"use strict";var e=i(1407);n.a={data:function(){return{imgUrl:""}},created:function(){var t=this.$route.params.id,n=this.$route.params.type,i=_baseUrl+"/bpm/activiti/processImage.do?";switch(n){case"task":i+="taskId=";break;case"inst":i+="instId=";break;case"start":i+="actDefId="}i+=t,this.imgUrl=i,this.$dialog.loading.open("正在加载流程图,请稍候...")},mounted:function(){var t=this,n=document.getElementById("processImg");new e.a(n);n.onload=function(){t.$dialog.loading.close()}}}},1532:function(t,n,i){n=t.exports=i(327)(!0),n.push([t.i,"#scrollView .pinch-zoom-container{height:100%!important}","",{version:3,sources:["E:/work/redxun/mobile/mobile/src/components/bpm/FlowImage.vue"],names:[],mappings:"AACA,kCAEC,qBAAwB,CACxB",file:"FlowImage.vue",sourcesContent:["\n#scrollView .pinch-zoom-container{\n\t/*box-sizing: border-box;*/\n\theight: 100% !important;\n}\n"],sourceRoot:""}])},1579:function(t,n,i){var e=i(1532);"string"==typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);i(1169)("36aad0a8",e,!0)},1627:function(t,n,i){"use strict";var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("yd-layout",[i("yd-navbar",{attrs:{slot:"navbar",title:"流程图"},slot:"navbar"},[i("a",{attrs:{slot:"left",href:"javascript:;"},on:{click:t.goBack},slot:"left"},[i("yd-navbar-back-icon")],1)]),t._v(" "),i("img",{attrs:{src:t.imgUrl,id:"processImg"}})],1)},o=[],s={render:e,staticRenderFns:o};n.a=s},1662:function(t,n){(function(n){t.exports=n}).call(n,{})}});
//# sourceMappingURL=22.a28cf9a012b130059b37.js.map